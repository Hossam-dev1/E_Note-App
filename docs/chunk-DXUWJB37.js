import{a as ae}from"./chunk-3YLN4RDI.js";import{a as oe}from"./chunk-EJ5B3IGY.js";import"./chunk-JJM7VFUE.js";import{a as ce,b as me}from"./chunk-2THVLUZ7.js";import{a as Ce}from"./chunk-DIDSKB7T.js";import{b as se,e as pe,f as de,h as ue,i as fe,j as _e,k as ve,n as ge,o as he}from"./chunk-6SYXPBD6.js";import{a as le}from"./chunk-ZYTFNW7I.js";import{$a as V,Aa as N,B as G,Ba as w,C as u,D as f,Da as C,Ea as A,F as W,Fa as X,K as q,Ka as Y,L as y,Ma as L,Na as Z,Oa as ee,P as J,Q as K,R as F,S as o,Sa as te,T as S,Xa as ie,Ya as ne,Z as Q,_a as re,ba as _,ca as l,ea as b,eb as D,fb as k,g as z,ga as M,ha as U,ia as R,j as E,ja as a,k as P,ka as c,la as d,oa as g,p as H,pa as v,qa as p,ua as m,v as O,va as j,wa as h,y as T,za as I}from"./chunk-IVXWDJCI.js";import{h as $}from"./chunk-OLEEAF3F.js";var xe=(()=>{let r=class r{constructor(){this.domSanitizer=y(ie)}transform(n){return $(this,null,function*(){let{marked:i}=yield import("./chunk-CVGCHP5G.js");return this.domSanitizer.sanitize(J.HTML,i.parse(n))||""})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275pipe=G({name:"markdown",type:r,pure:!0,standalone:!0});let e=r;return e})();function Ae(e,r){if(e&1){let t=g();a(0,"span",9)(1,"i",10),v("click",function(){u(t);let i=p(2);return f(i.delete.emit(!0))}),c()()}}var ye=e=>["/profile",e];function Ee(e,r){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"p",3),m(3),c()(),a(4,"div",4)(5,"a",5),d(6,"img",6),c(),m(7," \xA0 "),a(8,"a",5),m(9),c(),a(10,"span",7),m(11),C(12,"date"),c(),_(13,Ae,2,0,"span",8),C(14,"async"),c()()),e&2){let t=p();o(3),h(" ",t.comment.body," "),o(2),l("routerLink",w(12,ye,t.comment.author.username)),o(),l("src",t.comment.author.image,F),o(2),l("routerLink",w(14,ye,t.comment.author.username)),o(),h(" ",t.comment.author.username," "),o(2),h(" ",X(12,7,t.comment.createdAt,"longDate")," "),o(2),b(13,A(14,10,t.canModify$)?13:-1)}}var Se=(()=>{let r=class r{constructor(){this.delete=new O,this.canModify$=y(D).currentUser.pipe(E(n=>n?.username===this.comment.author.username))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=T({type:r,selectors:[["app-article-comment"]],inputs:{comment:"comment"},outputs:{delete:"delete"},standalone:!0,features:[I],decls:1,vars:1,consts:[["class","card"],[1,"card"],[1,"card-block"],[1,"card-text"],[1,"card-footer"],[1,"comment-author",3,"routerLink"],[1,"comment-author-img",3,"src"],[1,"date-posted"],["class","mod-options"],[1,"mod-options"],[1,"ion-trash-a",3,"click"]],template:function(i,s){i&1&&_(0,Ee,15,16,"div",0),i&2&&b(0,s.comment?0:-1)},dependencies:[V,ee,L],encapsulation:2});let e=r;return e})();var be=(()=>{let r=class r{constructor(n){this.http=n}getAll(n){return this.http.get(`/articles/${n}/comments`).pipe(E(i=>i.comments))}add(n,i){return this.http.post(`/articles/${n}/comments`,{comment:{body:i}}).pipe(E(s=>s.comment))}delete(n,i){return this.http.delete(`/articles/${i}/comments/${n}`)}};r.\u0275fac=function(i){return new(i||r)(q(te))},r.\u0275prov=W({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();var ke=e=>["/editor",e],Te=e=>({disabled:e});function Ie(e,r){if(e&1){let t=g();a(0,"span")(1,"a",16),d(2,"i",17),m(3," Edit Article "),c(),a(4,"button",18),v("click",function(){u(t);let i=p(2);return f(i.deleteArticle())}),d(5,"i",19),m(6," Delete Article "),c()()}if(e&2){let t=p(2);o(),l("routerLink",w(2,ke,t.article.slug)),o(3),l("ngClass",w(4,Te,t.isDeleting))}}function Le(e,r){if(e&1){let t=g();a(0,"span")(1,"app-follow-button",20),v("toggle",function(i){u(t);let s=p(2);return f(s.toggleFollowing(i))}),c(),a(2,"app-favorite-button",21),v("toggle",function(i){u(t);let s=p(2);return f(s.onToggleFavorite(i))}),m(3),a(4,"span",22),m(5),c()()()}if(e&2){let t=p(2);o(),l("profile",t.article.author),o(),l("article",t.article),o(),h(" ",t.article.favorited?"Unfavorite":"Favorite"," Article "),o(2),h("(",t.article.favoritesCount,")")}}function Ve(e,r){if(e&1&&(a(0,"li",23)(1,"a",24),m(2),c()()),e&2){let t=r.$implicit;o(),l("href",t,F),o(),j(t)}}var De=()=>["/login"],Me=()=>["/register"];function Ue(e,r){e&1&&(a(0,"div")(1,"a",25),m(2,"Sign in"),c(),m(3," or "),a(4,"a",25),m(5,"sign up"),c(),m(6," to add comments on this article. "),c()),e&2&&(o(),l("routerLink",N(2,De)),o(3),l("routerLink",N(3,Me)))}function Re(e,r){if(e&1){let t=g();a(0,"app-article-comment",26),v("delete",function(){let s=u(t).$implicit,x=p(2);return f(x.deleteComment(s))}),c()}if(e&2){let t=r.$implicit;l("comment",t)}}function je(e,r){if(e&1){let t=g();a(0,"div"),d(1,"app-list-errors",27),a(2,"form",28),v("ngSubmit",function(){u(t);let i=p(2);return f(i.addComment())}),a(3,"fieldset",29)(4,"div",30),d(5,"textarea",31),c(),a(6,"div",32),d(7,"img",33),a(8,"button",34),m(9," Post Comment "),c()()()()()}if(e&2){let t=p(2);o(),l("errors",t.commentFormErrors),o(2),l("disabled",t.isSubmitting),o(2),l("formControl",t.commentControl),o(2),l("src",(t.currentUser==null?null:t.currentUser.image)===null?"":t.currentUser==null?null:t.currentUser.image,F)}}function Ne(e,r){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),m(4),c(),a(5,"app-article-meta",4),_(6,Ie,7,6,"span")(7,Le,6,4),c()()(),a(8,"div",5)(9,"div",6)(10,"div",7),d(11,"div",8),C(12,"async"),C(13,"markdown"),a(14,"ul",9)(15,"span",10),m(16,"Referance : "),c(),U(17,Ve,3,2,"li",35,M),c(),a(19,"div",11)(20,"span"),m(21,"Examples_Link : "),c(),a(22,"a",12),C(23,"lowercase"),m(24,"See"),c()()()(),d(25,"hr"),a(26,"div",13)(27,"div",14),_(28,Ue,7,4,"div",15),U(29,Re,1,1,"app-article-comment",36,M),_(31,je,10,4,"div",15),c()()()()),e&2){let t=p();o(4),j(t.article.title),o(),l("article",t.article),o(),b(6,t.canModify?6:7),o(5),l("innerHTML",A(12,7,A(13,9,t.article.body)),K),o(6),R(t.article.tagList),o(5),l("routerLink","/skills/"+A(23,11,t.article.title)),o(6),l("ifAuthenticated",!1),o(),R(t.comments),o(2),l("ifAuthenticated",!0)}}var bt=(()=>{let r=class r{constructor(n,i,s,x,we){this.route=n,this.articleService=i,this.commentsService=s,this.router=x,this.userService=we,this.comments=[],this.canModify=!1,this.commentControl=new fe("",{nonNullable:!0}),this.commentFormErrors=null,this.isSubmitting=!1,this.isDeleting=!1,this.destroyRef=y(Q)}ngOnInit(){let n=this.route.snapshot.params.slug;P([this.articleService.get(n),this.commentsService.getAll(n),this.userService.currentUser]).pipe(H(i=>(this.router.navigate(["/"]),z(()=>i))),k(this.destroyRef)).subscribe(([i,s,x])=>{this.article=i,this.comments=s,this.currentUser=x,this.canModify=x?.username===i.author.username})}onToggleFavorite(n){this.article.favorited=n,n?this.article.favoritesCount++:this.article.favoritesCount--}toggleFollowing(n){this.article.author.following=n.following}deleteArticle(){this.isDeleting=!0,this.articleService.delete(this.article.slug).pipe(k(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])})}addComment(){this.isSubmitting=!0,this.commentFormErrors=null,this.commentsService.add(this.article.slug,this.commentControl.value).pipe(k(this.destroyRef)).subscribe({next:n=>{this.comments.unshift(n),this.commentControl.reset(""),this.isSubmitting=!1},error:n=>{this.isSubmitting=!1,this.commentFormErrors=n}})}deleteComment(n){this.commentsService.delete(n.id,this.article.slug).pipe(k(this.destroyRef)).subscribe(()=>{this.comments=this.comments.filter(i=>i!==n)})}};r.\u0275fac=function(i){return new(i||r)(S(ne),S(le),S(be),S(re),S(D))},r.\u0275cmp=T({type:r,selectors:[["app-article-page"]],standalone:!0,features:[I],decls:1,vars:1,consts:[["class","article-page"],[1,"article-page"],[1,"banner"],[1,"container"],[3,"article"],[1,"container","page"],[1,"row","article-content"],[1,"col-md-12"],["dir","auto",3,"innerHTML"],[1,"tag-list"],[1,"p-4"],[1,"examples"],["target","_blank",3,"routerLink"],[1,"row"],[1,"col-xs-12","col-md-8","offset-md-2"],[4,"ifAuthenticated"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ion-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"ngClass","click"],[1,"ion-trash-a"],[3,"profile","toggle"],[3,"article","toggle"],[1,"counter"],[1,"tag-default","tag-pill","tag-outline"],["target","_blank",3,"href"],[3,"routerLink"],[3,"comment","delete"],[3,"errors"],[1,"card","comment-form",3,"ngSubmit"],[3,"disabled"],[1,"card-block"],["placeholder","Write a comment...","rows","3",1,"form-control",3,"formControl"],[1,"card-footer"],[1,"comment-author-img",3,"src"],["type","submit",1,"btn","btn-sm","btn-primary"],["class","tag-default tag-pill tag-outline"],[3,"comment"]],template:function(i,s){i&1&&_(0,Ne,32,13,"div",0),i&2&&b(0,s.article?0:-1)},dependencies:[ce,V,Y,ae,me,xe,L,Ce,ge,_e,se,pe,de,ue,Se,he,ve,oe,Z],encapsulation:2});let e=r;return e})();export{bt as default};
