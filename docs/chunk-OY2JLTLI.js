import{a as $,b as B}from"./chunk-2THVLUZ7.js";import{a as j}from"./chunk-ZYTFNW7I.js";import{$a as U,Ba as L,C as O,D as N,Ka as M,L as T,R as b,S as n,T as D,Z as w,ba as F,c as E,ca as p,ea as A,eb as R,fb as x,ga as g,ha as u,ia as d,ja as s,ka as l,la as I,ma as k,na as P,oa as q,pa as v,qa as _,ua as c,va as h,wa as C,y as f,za as y}from"./chunk-IVXWDJCI.js";function z(e,t){if(e&1&&(s(0,"li",6)(1,"a",7),c(2),l()()),e&2){let a=t.$implicit;n(),p("href",a,b),n(),h(a)}}var H=e=>["/article",e],G=(()=>{let t=class t{toggleFavorite(i){this.article.favorited=i,i?this.article.favoritesCount++:this.article.favoritesCount--}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=f({type:t,selectors:[["app-article-preview"]],inputs:{article:"article"},standalone:!0,features:[y],decls:13,vars:8,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"article","toggle"],[1,"preview-link",3,"routerLink"],["dir","auto"],[1,"tag-list"],[1,"tag-default","tag-pill","tag-outline"],["target","_blank",3,"href"],["class","tag-default tag-pill tag-outline"]],template:function(o,r){o&1&&(s(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),v("toggle",function(Q){return r.toggleFavorite(Q)}),c(3),l()(),k(4),s(5,"a",3)(6,"h1"),c(7),l(),s(8,"p",4),c(9),l()(),s(10,"ul",5),u(11,z,3,2,"li",8,g),l(),P(),l()),o&2&&(n(),p("article",r.article),n(),p("article",r.article),n(),C(" ",r.article.favoritesCount," "),n(2),p("routerLink",L(6,H,r.article.slug)),n(2),h(r.article.title),n(2),h(r.article.description),n(2),d(r.article.tagList))},dependencies:[$,B,U],encapsulation:2});let e=t;return e})();var m=function(e){return e.NOT_LOADED="NOT_LOADED",e.LOADING="LOADING",e.LOADED="LOADED",e}(m||{});function J(e,t){e&1&&(s(0,"div",1),c(1,"Loading articles..."),l())}var K=(e,t)=>t.slug;function W(e,t){if(e&1&&I(0,"app-article-preview",3),e&2){let a=t.$implicit;p("article",a)}}function X(e,t){e&1&&(s(0,"div",1),c(1,"No articles are here... yet."),l())}var Y=e=>({active:e});function Z(e,t){if(e&1){let a=q();s(0,"li",4)(1,"button",5),v("click",function(){let r=O(a).$implicit,S=_(2);return N(S.setPageTo(r))}),c(2),l()()}if(e&2){let a=t.$implicit,i=_(2);p("ngClass",L(2,Y,a===i.currentPage)),n(2),C(" ",a," ")}}function ee(e,t){if(e&1&&(u(0,W,1,1,"app-article-preview",3,K,!1,X,2,0,"div",0),s(3,"nav")(4,"ul",2),u(5,Z,3,4,"li",6,g),l()()),e&2){let a=_();d(a.results),n(5),d(a.totalPages)}}var he=(()=>{let t=class t{set config(i){console.log(i),i&&(this.query=i,this.currentPage=1,this.runQuery())}constructor(i,o){this.articlesService=i,this.userService=o,this.query={type:"all",filters:{}},this.results=[],this.currentPage=1,this.totalPages=[],this.loading=m.NOT_LOADED,this.LoadingState=m,this.destroyRef=T(w),this.dataObservable=new E([]),this.limit=20,this.getUserName(),console.log("ArticleListComponent")}setPageTo(i){this.currentPage=i,this.runQuery()}runQuery(){this.loading=m.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.query.filters.author=this.userName,this.articlesService.query(this.query).pipe(x(this.destroyRef)).subscribe(i=>{this.loading=m.LOADED,this.results=i.articles,this.dataObservable.next(i.articles)})}getUserName(){this.userService.currentUser.pipe(x(this.destroyRef)).subscribe(i=>this.userName=i.username)}};t.\u0275fac=function(o){return new(o||t)(D(j),D(R))},t.\u0275cmp=f({type:t,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},standalone:!0,features:[y],decls:2,vars:2,consts:[["class","article-preview"],[1,"article-preview"],[1,"pagination"],[3,"article"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"],["class","page-item",3,"ngClass"]],template:function(o,r){o&1&&F(0,J,2,0,"div",0)(1,ee,7,1,"nav"),o&2&&(A(0,r.loading===r.LoadingState.LOADING?0:-1),n(),A(1,r.loading===r.LoadingState.LOADED?1:-1))},dependencies:[G,M],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();export{he as a};
